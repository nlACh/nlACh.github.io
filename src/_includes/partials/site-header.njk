{# Skip to main content https://design-system.service.gov.uk/components/skip-link/ #}

<a class="skip-link visually-hidden" href="#main-content">Skip to main content</a>
<header class="site-header">
	<nav class="main-nav" role="navigation" aria-label="Main navigation">
		<div class="nav-container wrapper">
			<a href="/" class="nav-brand">{{ config.projectName }}</a>
			<div class="nav-right">
				<button class="theme-toggle-button" aria-label="Toggle dark/light mode" onclick="toggleTheme()">
					<span class="theme-icon-light">‚òÄÔ∏è</span>
					<span class="theme-icon-dark">üåô</span>
				</button>
				<button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">
					<span class="nav-toggle-icon"></span>
				</button>
			</div>
			<ul class="nav-menu">
				<li><a href="/" {% if page.url == "/" %}class="nav-active" aria-current="page"{% endif %}>Home</a></li>
				<li><a href="/research/" {% if "/research" in page.url %}class="nav-active" aria-current="page"{% endif %}>Research</a></li>
				<li><a href="/cv/" {% if "/cv" in page.url %}class="nav-active" aria-current="page"{% endif %}>CV</a></li>
				<li><a href="/posts/" {% if "/posts" in page.url %}class="nav-active" aria-current="page"{% endif %}>Blog</a></li>
			</ul>
		</div>
	</nav>
</header>

<script>
function toggleTheme() {
	const html = document.documentElement;
	const currentTheme = html.getAttribute('data-theme');
	const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
	const toggleBtn = document.querySelector('.theme-toggle-button');
	
	html.setAttribute('data-theme', newTheme);
	
	// Update aria-label for accessibility
	if (toggleBtn) {
		toggleBtn.setAttribute('aria-label', newTheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode');
	}
	
	try {
		localStorage.setItem('theme', newTheme);
	} catch (e) {
		// localStorage not available
	}
}

document.addEventListener('DOMContentLoaded', function() {
	// Update initial aria-label based on current theme
	const toggleBtn = document.querySelector('.theme-toggle-button');
	const currentTheme = document.documentElement.getAttribute('data-theme');
	if (toggleBtn) {
		toggleBtn.setAttribute('aria-label', currentTheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode');
	}
	
	const navToggle = document.querySelector('.nav-toggle');
	const navMenu = document.querySelector('.nav-menu');
	
	if (navToggle && navMenu) {
		navToggle.addEventListener('click', function() {
			const isExpanded = navToggle.getAttribute('aria-expanded') === 'true';
			navToggle.setAttribute('aria-expanded', !isExpanded);
			navMenu.classList.toggle('nav-menu-open');
		});
	}
});
</script>