{# - Head order thanks to https://github.com/rviscomi/capo.js #}

{# Theme initialization - runs before page render to prevent flash #}
<script>
  (function() {
    try {
      const theme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', theme);
    } catch (e) {
      // localStorage not available (e.g., private browsing mode)
      document.documentElement.setAttribute('data-theme', 'light');
    }
  })();
</script>

{# Page title format #}
{% set pageTitle = title + ' | ' + config.projectName %}
{# Remove any title duplication #}
{% if title === config.projectName %} {% set pageTitle = title + ' - Researcher in Quantum Transport and Nanoscale Devices' %} {% endif %}

{# URL formats #}
{% set thisUrl = config.domain + page.url %}

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>{{ pageTitle }}</title>

<link rel="stylesheet" href="/site.css" media="all">

{# ------------ SEO Meta Tags ------------ #}
<meta name="description" content="{{ description if description else config.description }}">
<meta name="author" content="{{ config.author.name }}">
<meta name="keywords" content="{{ config.keywords }}">
<meta name="theme-color" content="{{ config.themeColor }}">

<link rel="canonical" href="{{ thisUrl }}">

{# ------------ Open Graph Tags ------------ #}
{% if config.og %}
  <meta property="og:url" content="{{ thisUrl }}">
  <meta property="og:site_name" content="{{ config.projectName }}">
  <meta property="og:title" content="{{ pageTitle }}">
  <meta property="og:description" content="{{ description if description else config.description }}">
  {% if config.og.locale %}
    <meta property="og:locale" content="{{ config.og.locale }}">
  {% endif %}
  {% if config.og.type %}
    <meta property="og:type" content="{{ config.og.type }}">
  {% endif %}
  {% if config.og.image %}
    <meta property="og:image" content="{{ config.domain }}{{ config.og.image.rel }}">
    <meta property="og:image:alt" content="{{ config.og.image.alt }}">
  {% endif %}
{% endif %}

{# ------------ Twitter Card Tags ------------ #}
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="{{ pageTitle }}">
<meta name="twitter:description" content="{{ description if description else config.description }}">
{% if config.og.image %}
  <meta name="twitter:image" content="{{ config.domain }}{{ config.og.image.rel }}">
{% endif %}

<meta name="generator" content="{{ eleventy.generator }}">
<meta name="robots" content="{{ config.robots }}">

<link rel="alternate" href="/feed.xml" type="application/atom+xml" title="{{ config.projectName }}">

{# Identity loop #}
{% if config.identity %}
  {% for item in config.identity %}
    <link rel="{{ item.rel }}" href="{{ item.url }}">
  {% endfor %}
{% endif %}

{# - Minimal favicons thanks to https://evilmartians.com/chronicles/how-to-favicon-in-2021-six-files-that-fit-most-needs #}
<link rel="manifest" href="/manifest.webmanifest">
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/icon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

{# ------------ Schema.org Structured Data for Academic Profile ------------ #}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "{{ config.author.name }}",
  "jobTitle": "Senior Research Fellow",
  "affiliation": {
    "@type": "Organization",
    "name": "Quantum Scale Materials and Digital Microfluidics Research Group, University of Calcutta"
  },
  "email": "{{ config.author.email }}",
  "url": "{{ config.domain }}",
  "sameAs": [
    "{{ config.social.googleScholar }}",
    "{{ config.social.researchGate }}"
  ],
  "knowsAbout": [
    "Quantum Transport",
    "Non-Equilibrium Green's Function (NEGF)",
    "Nanoscale Electronic Devices",
    "Quantum Computing",
    "Semiconductor Device Fabrication",
    "Electron Beam Lithography",
    "Quantum Dots",
    "Nanowire FETs",
    "finFETs"
  ]
}
</script>